---
layout: default
title: トップページ
---

# 職務経歴書

## 基本情報
名前: 加賀谷諒(かがやりょう)  
生年月日: 1995/4/26  
[自己紹介](https://rkaga.super.site), [Blog](https://r-kaga.com/), [X](https://twitter.com/ry0_kaga), [Zenn](https://zenn.dev/r_kaga), [Github](https://github.com/r-kaga)  

ID連携システムや、BtoB SaaS開発などで5年ほどの経験があります。バックエンド、クラウドインフラ、プラットフォーム開発、イネーブルメントチームなど様々なレイヤーでソフトウェア開発を経験。  
学生時代に受託系の会社でiOSアプリエンジニアとして、某アフリカの国家の官公庁向けのダイエットアプリ、某靴メーカーのイベント限定販促アプリ、自社開発として旅程管理アプリの開発を行う。  
新卒で入社したヤフー株式会社では、ID連携システムの保守・運用開発を経験したのち、ID連携システムのフルリプレイスPJにPJリードとして従事。  
DB・シークレット等のマイグレーション、トークン類の再設計、アプリケーションレイヤーの設計・開発から、k8sを用いたインフラレイヤーの設計・運用、チームへのオンボーディング設計まで実施。  
その後、2022年に株式会社ログラスに入社。ソフトウェアエンジニアとしてマスタ管理等の開発、イネーブルメントチームの一員として主に開発者生産性・体験の向上を中心とした横断課題の解決に取り組んだのち、現在は生成AI/LLMチームの立ち上げを行なっている。  
生成AI/LLMチームでは、リードソフトウェアエンジニアとしてディスカバリからデザイン・開発、社内の生成AIツールの普及まで横断的に推進。

## 職務経歴
### 株式会社ログラス | 2022/04 ~
ソフトウェアエンジニアとして入社し、会計情報取り込み機能のリファクタリングやBIツール連携、マスタ管理機能の開発に従事。  
その後、イネーブルメントチームの一員として主に開発者生産性・体験の向上を中心とした横断課題の解決に取り組み、リリースプロセスの見直しやトイルの自動化、Four Keysを用いた開発生産性向上の取り組みを行う。  
現在は生成AI/LLMチームの立ち上げを行ない、プロダクト・組織の両面での生成AI/LLMの活用を探索。ソフトウェアエンジニアとして主にUI/UXデザイン・開発領域をリードし、LLMを用いた機能や業務改善ツールの開発を複数行なう他、社内の生成AIツールの普及にも取り組む。  

#### 主な担当案件
##### プロダクト
- 会計情報取り込み機能のリファクタリング
  - 当時のプロダクトにおいて、最も複雑な仕様・コードベースであり、さらに最も個別対応が発生し、開発コストを圧迫していた会計情報取り込み機能のリファクタリンのエピックオーナー(PJオーナー)としてリファクタリングPJを実施。
  - 課題
    - 1会計システムあたり10spの開発コストが発生、当時の見込みでQ(3ヶ月単位)あたりで2,3会計システムの追加対応が発生しており、開発リソースを逼迫していた
    - 会計システム毎にパターンやマッチングに使うキーが異なるなど、仕様・コードベースも複雑になっており、各会計システム毎のロジックの把握や分離して記述することが難しい状態になっていた
  - プロセス
    - 初期段階ではコードリーディングを重ねて、当時の仕様やパターン・分岐を洗い出して、会計システム毎に項目マッピング表や会計システム毎に差分が生じる部分の仕様をドキュメント化
    - オンコール対応履歴や利用履歴などから最も頻出・ROI高い項目から優先してリファクタ・ドキュメント化
    - 当初の目的であった開発リソースの圧迫を緩和するため、仕様整理や追加手順のドキュメント化を行うことで、副業メンバーでも対応可能に
  - 結果
    - リファクタ後は、新会計システム対応を1.5SPで完了実績
    - 副業メンバーによる会計システム追加対応を可能に
        - ほぼ既存会計システムを参考に実装・unit testは対応可能な構成にリファクタリングし、追加手順ドキュメントも整備
- [自然言語レポート作成補助機能（α版）](https://prtimes.jp/main/html/rd/p/000000073.000052025.html)
  - 行列の条件を指定し、柔軟にデータを表示することが可能なレポート機能にアドオンする形で自然言語でレポート設定を行える機能を開発
    - メンバーは主にプレスリリースやプライバシーポリシー等の整理などの企画を担当したメンバー一人、エンジニアである私との二人体制 
  - 課題として存在していた「リテラシーが高い・ドメイン知識がなければプロダクトを操作するのが難しい」という課題に対して、生成AI/LLMを活用できると仮説づけ、デモ・POCを作成。その後会社としての生成AI/LLMに向けたモメンタム醸成の目的も踏まえてリリースに踏み切る
  - OpenAI APIを用いており、当時は存在していなかったFunction Callingと同様の仕組みをプロンプトやコードで実現する構成
  - 設定に不慣れな社内・一部ユーザーからは,今まで0.5~1.0hかかってた設定が1分で終わるとの声を受ける
  - 一方で、上記効果はあくまで本体のレポート機能の完成度の低さに依存し、さらに業務で利用するレベルの複雑さのレポートを作成するには自然言語での入力は自由度が高すぎるため、開発コストとインパクトの大きさを鑑みて、本格的な磨き込みは断念
- [AI分析アシスタント（β版）](https://prtimes.jp/main/html/rd/p/000000094.000052025.html)
- 各部署から申請された予算・見込みの要約機能

##### 業務改善
- [企業情報検索ツール](https://note.com/ry0_kagaya/n/n66bce33cb2b4)
  - https://note.com/ry0_kagaya/n/n66bce33cb2b4 
- お客様企業の組織・科目階層エクセルからプロダクトFMTファイルへ変換ツール
- 表記揺れ検知ツール

#### [開発生産性向上](https://seleck.cc/1578)
- 当時複数開発チームになったタイミングで、リリースを代表的に様々なプロセスの非効率や整備が行き届かない点や開発生産性の良し悪しが見えづらくなったのが課題として存在していた
- 初期は開発チームに所属しつつ、草の根活動としてfour keysを中心とした生産性可視化・改善、リリースプロセス、インシデントフローの自動化・最適化を実施
- その後、イネーブルメントチームの実験的な発足に伴い開発生産性をメインミッションとして専任。
- 代表的な例がリリース改善活動
  - エンジニアがリリースに掛けていたコストを1h -> 10分ほどに短縮
    - ほぼ自動化やプロセスの整備がされておらず、手動作業や確認作業が存在していた
	- リリース内容のリストアップ
	- PdM・CSによるリリース内容の確認・連携
	- Github Releaseのpublish   
  - リリース回数の増加
    - PdM・CSとの連携やフローを整備した上で、週1から週2回にリリース回数を増やすべくプロセス整備を実施
    - CS視点ではリリース内容のお客様共有を行うことを踏まえると、週2回以上に増やすことのインセンティブがないため、漸進的な進め方として週2回で実施
  - 当時開発組織全体のレトロで「リリースが辛い」などの課題が頻出していたが、よりデプロイ時間の短縮やオンデマンドリリースを求める課題感に変化
- その他、FindyTeamの導入やリードタイム改善のためのイネーブルメント・様々な自動化/xOps活動や技術負債解消のための技術的投資のオーナーとして各チーム間での運用を取りまとめるなどの生産性向上に繋がる活動を幅広く実施
- 結果、社内での表彰でバリュー賞にノミネート、社内からも緊急度の高い課題感が出てこなくなる状況に3ヶ月で到達。当時時点では専任リソースは不要という判断に至り、アサイン解消
- 反省
  - DX Criteriaなどのより抽象度の高い開発組織課題への取り組みは頓挫
  
### ヤフー株式会社 | 2018/04 ~
新卒入社後、OpenID Connectに準拠したID連携システムの開発、保守を1年ほど担当。  
入社2年目からはID連携システムのフルリプレイスPJに立ち上げ当初から携わり、現在に至るまで旧環境から新環境への移行に取り組んでいる。  
開発スタイルとしてはスクラムを採用。  

#### 主な担当案件
- ID連携システムへのPPID導入
- ID連携システムのフルリプレイスPJ
  - 独自DBからCassandraへの移行
  - Client Secretの移行
  - サイドカーとして利用するCassandraのラッパーAPI開発
  - クライアント,同意情報などを取り扱う、社内他サービスと連携を行うためのAPI開発
  - 新アクセストークン、リフレッシュトークンの仕様設計、マイグレーション
  - トークン発行マイクロサービスの開発
  - OpenID Connect準拠の認可サーバー移行開発
  - 内部運用ツールの移行・新規開発
- QRコードを使用したレンタル傘サービスのPoC


#### ID連携システムのフルリプレイスPJ詳細
##### プロジェクトの概要
OpenID Connectに準拠したID連携システムのフルリプレイスPJ  
少人数のプロジェクトであり、立ち上げ当初から関わる唯一のメンバー、プロジェクト途中からは主に技術面でプロジェクトをリードする立場として、プロジェクト全体のロードマップの立案、ID連携システムの全体設計、また個別システムの設計・開発、開発フローや監視ツール,CI/CDフローの再設計まで行った。  

##### プロジェクトの目的
OpenID Connectに準拠したID連携システムを技術スタックを刷新した上で新環境に移行する事を目指す。  
稼働から年数が経過し技術的負債を抱えレガシーな環境となった現行システムでは、運用にかかるコストの増加、新規機能追加にかかるコストの増加が課題となっていた。  
また自社独自の技術/PFを用いて実装されており、それらの仕組みの陳腐化やメンテナンス等の問題も存在していた。  
そのため技術スタックの刷新、一部機能の廃止を行う事で、技術的負債を返済し、開発スピードの向上やより信頼性の高いシステムを新たに構築する事を目指す。  
過去最大でも専任メンバーが3人という少人数のプロジェクトとして数年にわたって現在も進行中。  

##### プロジェクトの規模・体制
- 人数: 最高4人
- 期間: 2年半~
- 開発スタイル: スクラム

##### プロジェクトにおける自身の役割
- PJリード
  - 技術面・ドメイン知識をPJ内で最も持つメンバーとして、ロードマップやストーリーの作成・整理・優先順位の決定から設計・実装まで担当
- バックエンドエンジニア(一部フロントエンド)

##### プロジェクトスコープ
- フルリプレイスPJ
  - 独自DBからCassandraへの移行・マイグレーション
  - Client Secretの移行・マイグレーション
  - 同意情報管理ページの開発
  - サイドカーとして利用するCassandraのラッパーAPI開発
  - クライアント,同意情報などを取り扱う、主に社内他サービスと連携を行うためのAPI開発
  - アクセストークン、リフレッシュトークンの仕様設計、マイグレーション
  - トークン類発行マイクロサービスの開発
  - OpenID Connect準拠の認可サーバー開発

##### 主な技術スタック
新環境では、バックエンドはKotlin×Spring Boot、デプロイは内製しているk8sのマネージドサービスを利用している。各チーム毎にk8sクラスタを保持しているため、CI/CDの設定やk8sのマニフェストファイルの記述からPrometheus,AlertManager,Grafana等を用いた監視、モニタリングの設定までチーム内で設定・運用している。  
一部運用向けツールなどフロントエンド開発では、TypeScript、Nuxt.js(一部Next.js)を用いて、内製PaaSにデプロイを行なっている。  

- Language
  - Kotlin
  - TypeScript
- Framework
  - Spring Boot
  - Express.js
  - Nuxt.js
  - Next.js
- Infra
  - k8s
  - Kustomize
  - Skaffold
- Logging
  - Fluentd
  - Splunk
- Monitoring
  - Prometheus
  - AlertManager
  - Grafana
- Tracing
  - Dynatrace
- CI/CD
  - Screwdriver
  - Argo Rollouts
- DB
  - Cassandra
- Other
  - OAuth
  - OpenID Connect
  - Graphql
  - OpenAPI

#### CassandraのラッパーAPIの構築/GraphQL導入
現行システムにおいてはDBとしてCassandraを採用していたが、ID連携システムを構成する複数システムから直接Cassandraに接続しており、また参照/更新ロジックを共通化していなかったためドメインロジックが複数箇所に散らばり、ロジック変更時の影響範囲が大きくなってしまっていた。  
テーブル構成上、特定ユースケースでは複数テーブルを実質joinする形でCassandraにアクセスする必要があり、それにより複数テーブルへのシーケンシャルなアクセスが複数システムで実装され、特に更新処理に関しては一部テーブルの更新忘れなどが発生し、事故直前で発覚するといった状況であった。 
また移行PJで計画されているDBマイグレを行う際にも、改修が必要なシステムが複数存在することにより影響範囲が広がってしまいより多くの工数を計上する必要が発生していた。  
加えて、エンドポイント、ユースケース毎に必要なデータのみを取得していないため、複数のテーブルの全てのデータを取得するなど、無駄なコストの発生や特定カラムの利用箇所洗い出しが容易には行えないなどの課題も存在していた。  
上記の課題を解消し、かつ移行PJ全体をスムーズに進行するため、またCassandraに格納したデータに関するビジネスロジックの再利用を目指すため、それらの処理を横断で担うAPIをサイドカーとして構築し、またクライアント側でテーブルではなく、それぞれのユースケースに応じたドメインモデルをより意識させるため、参照に関してはGraphQLエンドポイントを導入した。  
更新に関してはシステムの特性上GraphQLエンドポイントで処理する必要性が薄いと判断し、RESTエンドポイントを提供する構成を採用し、それによりビジネスロジックの共通化、ユースケース毎に必要最小限のデータを取得する事を可能なシステムとする事で、上記の課題を解消しユースケース毎に最適なドメインモデル単位でデータを扱える事でよりアプリケーションの本質的な部分にフォーカスする事を可能にした。  
また移行PJや他開発案件で計画されているDBマイグレの際には、ロジックを集約した事で今回構築したコンポーネントを中心に進める事が可能となり、将来的な移行を考慮したアーキテクチャを構築することが出来た。  

#### アーキテクチャ設計
チーム構成、デプロイ頻度等を考慮した上で、過度なマイクロサービスアーキテクチャ化は逆効果であると判断し、必要最小限の分離でのシステム構築を目指した。  
総称するとID連携システムと括られるが、ユースケース、クライアントなどが異なり別システムとみなせるものが複数存在しているため、それらに関しては基本的には分離した上で、共有運用を行っていたCassandraに格納したデータに関するロジックの再利用を目指すため、ID連携システム全体のドメインロジックの一部となる処理を横断で担うAPIをサイドカーとして構築した。  
それ以外にも、セキュリティ、パフォーマンス要件が高いトークン類に関する処理を切り出し、よりセキュアに、かつ高負荷に耐える事にフォーカスして開発、運用が行えるようにサービスを切り出した他、ID連携システムにもバージョンが複数存在していたため将来的な旧バージョンの廃止を見越して既存システムに可能な限り影響を与えずに廃止を行えるような構成を検討した他、社内サービスからリクエストを受けるためのコンポーネントはユースケース、クライアントが大きく異なるため障害時の影響を狭くし、社内、社外に対しての要件の違いを1システムで吸収せずに済むような構成を設計した。  

#### アーキテクチャ原則等のドキュメント整備
移行プロジェクトを進める中で、既存システムの過去のアーキテクチャや仕様の決定などに関するナレッジ、ドキュメントなどがあまり残っていない状況であり、そのため移行方針の決定のために当時の状況や背景の調査に時間を使う必要が幾度なく発生し、それにより現在の仕様、システムに関するドキュメントの他に当時の背景や理由も含めたドキュメントが存在する事の重要さを身に染みて体験した。  
本プロジェクトに関しても、最終的にチームの全開発者が移行後の環境で開発を行える状態にする必要があり、オンボーディングドキュメント等の整備だけは開発当時の背景などがすぐに失われてしまう事が想定されたため、ADRのコンセプトを参考にした上で、現在のアーキテクチャを決定した背景、理由などを積極的に残し、それらに記載されているアーキテクチャに関するドキュメントの内容について、改めてチームで議論や認識合わせを行う事で将来的に同様の課題を抱えないように、またこれらの議論やレビューを通して、移行後のシステム/環境に関するナレッジのシェアに繋げるために、アーキテクチャ原則等のドキュメント整備活動を行った。  
実際にドキュメントを整備する他、ドキュメントを残す場所に関するルールの策定(ID連携システム全体に関わるドキュメントを残すリポジトリの作成など)や、ドキュメントの参照を容易にするためにDocusaurusを用いてWebページとしてのI/Fを提供を行った。  
全体システム構成、API設計原則、ソフトウェアアーキテクチャのドキュメント化、議論を通じて、チーム内での共通認識をある程度統一することが出来、またこれらのドキュメントを元に設計を行うことで、チーム間で共通としたい設計原則(各コンポーネント間での責務など)、技術選定などの方針を、レビュー実施の前にある程度統一された状態を作る事が出来、レビューコストの低下や設計にかかる時間の減少にも繋がった。    

#### archunitを用いてアーキテクチャのunit test実施
ソフトウェアアーキテクチャのドキュメント化だけでは短期的には認識、理解が追いつかず、長期的にはドキュメントと実装の乖離が発生することで、アーキテクチャのルール違反となるコードが生まれる事が想定されたため、archunitを用いてアーキテクチャのunit testを実施する事で、レビュアーの負担なしにアーキテクチャのルールに違反しているコードを検知するような対応を行った。  
結果としてアーキテクチャルールの維持だけでなく、エラーとして認識する事で実装者がソフトウェアアーキテクチャの理解を自然と深める事を可能した  

#### 開発生産性・開発効率改善に繋がる施策の実施
PJの主目的が特定期限までの技術スタック刷新であるため、仕様、システムの双方の面で大幅な変更はスケジュールとの調整を求められる状況であったが、その中でも開発生産性、効率を表す指標の改善に繋がる施策は積極的に行う事を意識、実装を行なった。
具体的には、MTTR(Mean Time To Repair)、デプロイ平均所要時間、開発からデプロイまでのリードタイムに影響を与える施策として、以下のような改善を行なった。
- カナリアリリース
  - カナリアリリース自体は行える状態であったが、手動での作業が必要であり、それに伴う手順書準備、作業コストがかかっていた
  - より低いコストでカナリアリリースを可能にする事により、SLIやデプロイまでのリードタイム短縮を目指した 
- ロールバックの自動化
  - ロールバックを行うためには手動でのコマンド実行が必要な状態となっており、ロールバック完了まで1,2時間かかるケースも発生していた
  - 前述のカナリアリリースとも関連して、MTTRの短縮を目指して実施
- PR環境作成
  - PR環境の作成に手動での作業が必要な状況で、機能追加・改修時の動作確認に手間がかかっていた
  - PR作成時に環境を自動で作成する事で、エンジニア内での動作確認だけでなく、企画、デザイナーに対しての環境提供をスムーズに行えるようにする事で、開発からデプロイまでのリードタイム短縮を目指した
- unit testの拡充
  - 自動テストがe2eテストのみで構成されており、開発時のフィードバックループにかかる時間が問題となっていた
  - テストピラミッドを意識し、unit testの割合を増やすことで、より早く機能開発時のフィードバックを受けられる環境を目指した
- swaggerによるAPI I/Fの自動生成
  - 自動生成で足りる程度のAPI I/F整備も手動で行っていたため、作成や運用によるコストの削減を行うことで、デプロイまでのリードタイム短縮を行なった


## 副業
### 株式会社バックテック | 2019/01 - 2019/07
副業として、会社の福利厚生として社員に提供されるヘルスケアアプリの新規開発をFlutterで行った。  
開発メンバーの一人として、アカウント情報管理、チャット、毎日の情報入力などの機能/画面開発を行う。  


## 学生インターン
### 株式会社ストレート | 2016/12 - 2017/09 
大学在学中に、長期インターンとしてSwiftでiOSアプリ、PHPでWebアプリケーション、API等の受託開発に携わる  
会社全体で十数人規模、チーム構成も最大3人であったため自分が携わる機会/割合も多く、プロジェクトも3ヶ月~6ヶ月以内で完了する規模感だったため全体を把握する事も容易で、キャリアの初めにプロジェクトの開始から納品までの一連の流れを複数回経験する事が出来、非常に有意義な経験を積む事が出来たと感じている。   
主な担当案件は以下の通り。  
 - 旅程管理アプリ
 - イベント限定で利用できる某スニーカーメーカーのプロモーション用アプリ
 - 某アフリカ国でリリースされたダイエットアプリ

##### 規模・体制
- 人数: 3人
  - PM: 1人
  - iOSエンジニア(バックエンド兼任): 1人
  - Androidエンジニア(バックエンド兼任): 1人
- 期間: PJによるが、3~6ヶ月ほど
- 開発スタイル: ウォーターフォール

##### プロジェクトにおける自身の役割
- iOSエンジニア
- バックエンドエンジニア(iOSと兼任)

#### 主な技術スタック
- Swift3.0系
- PHP5.x (独自ライブラリを使用しておりFW利用はなし)
- MySQL 
- Apache
- Nginx
- AWS EC2

## 登壇歴
- [OpenID Tech Night](https://peatix.com/event/597678)
  - 入門 CIBA
